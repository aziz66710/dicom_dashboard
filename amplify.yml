version: 1
backend:
  phases:
    build:
      commands:
        - '# Execute Amplify CLI with the helper script'
        - pip3 install --upgrade pip
        - pip3 install --user pipenv
        - pip3 install virtualenv
        - yum -y update
        - yum -y groupinstall "Development Tools"
        - yum -y install gcc openssl-devel bzip2-devel libffi-devel
        - yum install wget
        - wget https://www.python.org/ftp/python/3.8.4/Python-3.8.4.tgz
        - tar xvf Python-3.8.4.tgz
        - cd Python-3.8.4
        - ./configure --enable-optimizations --with-ensurepip=install
        - make -j 8
        - make altinstall
        - amplifyPush --simple
frontend:
  phases:
    preBuild:
      commands:
        - npm install react-scripts
    # IMPORTANT - Please verify your build commands
    build:
      commands: 
        - npm run build
  artifacts:
    # IMPORTANT - Please verify your build output directory
    baseDirectory: build
    files:
      - '**/*'
  cache:
    paths: 
      - node_modules/**/*
